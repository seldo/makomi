var refrouter = require('../index')

var tests = [
  {
    referrer: "http://local.dev:3000/hello-2/output?route=/",
    regex: /local\.dev/
  },
  {
    referrer: "http://local.dev:3000/hello-2/output?route=/",
    regex: /\/output\?route=/
  },
  {
    referrer: "http://local.dev:3000/hello-2/output?route=/",
    regex: /\/.*\/output\?route=/
  },
  {
    referrer: "http://local.dev:3000/hello-2/output?route=/",
    regex: /\/\/.*\/(.*)\/output\?route=/
  }
]

tests.forEach(function(data,index) {

  var req = {
    headers: {
      referer: data.referrer
    }
  }
  var res = {}
  var next = function() {
    console.log("Did not match " + data.regex)
  }

  var router = refrouter(data.regex,function(req,res,next,staticMiddleware,matches) {
    console.log("Matched " + data.regex)
    console.log(matches)
  })

  router(req,res,next)

})